(function(t){function s(s){for(var r,i,o=s[0],c=s[1],l=s[2],p=0,u=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&u.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(s);while(u.length)u.shift()();return n.push.apply(n,l||[]),e()}function e(){for(var t,s=0;s<n.length;s++){for(var e=n[s],r=!0,o=1;o<e.length;o++){var c=e[o];0!==a[c]&&(r=!1)}r&&(n.splice(s--,1),t=i(i.s=e[0]))}return t}var r={},a={index:0},n=[];function i(s){if(r[s])return r[s].exports;var e=r[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=r,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var r in t)i.d(e,r,function(s){return t[s]}.bind(null,r));return e},i.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=s,o=o.slice();for(var l=0;l<o.length;l++)s(o[l]);var d=c;n.push([0,"chunk-vendors"]),e()})({0:function(t,s,e){t.exports=e("56d7")},"0030":function(t,s,e){},"0327":function(t,s,e){},"0a37":function(t,s,e){},1873:function(t,s,e){"use strict";var r=e("d624"),a=e.n(r);a.a},"1a51":function(t,s,e){"use strict";var r=e("c729"),a=e.n(r);a.a},"1b1c":function(t,s,e){"use strict";var r=e("b6b1"),a=e.n(r);a.a},"404f":function(t,s,e){},"44a0":function(t,s,e){},4678:function(t,s,e){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var s=n(t);return e(s)}function n(t){if(!e.o(r,t)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return r[t]}a.keys=function(){return Object.keys(r)},a.resolve=n,t.exports=a,a.id="4678"},"521b":function(t,s,e){"use strict";var r=e("bffa"),a=e.n(r);a.a},"56d7":function(t,s,e){"use strict";e.r(s);e("cadf"),e("551c"),e("f751"),e("097d");var r=e("2b0e"),a=e("8c4f"),n=e("c1df"),i=e.n(n),o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"root"},[e("Header",{attrs:{seller:t.seller}}),e("ul",{staticClass:"navBar border-1px border-bottom-1px"},[e("li",[e("router-link",{attrs:{to:"/goods"}},[t._v("商品")])],1),e("li",[e("router-link",{attrs:{to:"/ratings"}},[t._v("评论")])],1),e("li",[e("router-link",{attrs:{to:"/seller"}},[t._v("商家")])],1)]),e("div",{staticClass:"content"},[e("router-view",{attrs:{seller:t.seller}})],1)],1)},c=[],l=e("bc3a"),d=e.n(l),p=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header"},[e("div",{staticClass:"primary"},[e("img",{staticClass:"avatar",attrs:{src:t.seller.avatar,alt:"avatar"}}),e("div",{staticClass:"content"},[e("p",{staticClass:"title"},[t._v(t._s(t.seller.name))]),e("p",{staticClass:"description"},[t._v(t._s(t.seller.description)+" / "+t._s(t.seller.deliveryTime)+"分钟送达")]),t.seller.supports?e("p",{staticClass:"support"},[e("Support",{staticStyle:{width:"12px",height:"12px","margin-right":"4px"},attrs:{index:t.seller.supports[0].type}}),t._v("\n        "+t._s(t.seller.supports[0].description)+"\n      ")],1):t._e(),t.seller.supports?e("div",{staticClass:"button",on:{click:t.handleClick}},[t._v("\n        "+t._s(t.seller.supports.length)+"个\n        "),e("i",{staticClass:"icon-keyboard_arrow_right"})]):t._e()])]),e("div",{staticClass:"bulletin",on:{click:t.handleClick}},[e("span",[t._v(t._s(t.seller.bulletin))]),e("i",{staticClass:"icon-keyboard_arrow_right"})]),e("img",{staticClass:"background",attrs:{src:t.seller.avatar}}),e("transition",{attrs:{name:"detail"}},[t.show?e("Detail",{ref:"detail",attrs:{seller:t.seller,handleClick:t.handleClick}}):t._e()],1)],1)},u=[],f=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"detail-container",staticClass:"detail-container"},[e("div",{staticClass:"detail-wrapper"},[e("div",{staticClass:"content"},[e("p",{staticClass:"name"},[t._v(t._s(t.seller.name))]),e("div",{staticClass:"star-wrapper"},[e("Star",{attrs:{size:48,score:t.seller.score}})],1),e("p",{staticClass:"title border-1px"},[t._v("优惠信息")]),e("ul",{staticClass:"supports"},t._l(t.seller.supports,(function(s){return e("li",{key:s.description,staticClass:"support"},[e("Support",{staticStyle:{width:"16px",height:"16px","margin-right":"6px"},attrs:{index:s.type}}),t._v("\n          "+t._s(s.description)+"\n        ")],1)})),0),e("p",{staticClass:"title border-1px"},[t._v("商家公告")]),e("p",{staticClass:"bulletin"},[t._v("\n        "+t._s(t.seller.bulletin)+"\n      ")])]),e("div",{staticClass:"footer",on:{click:t.handleClick}},[e("i",{staticClass:"icon-close"})])])])},h=[],v=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{class:t.sizeType},t._l(t.stars,(function(t,s){return e("span",{key:s,class:t})})),0)},m=[],b=(e("c5f6"),{name:"Star",props:{size:{type:Number},score:{type:Number}},computed:{sizeType:function(){return"size-".concat(this.size)},stars:function(){for(var t=[],s=Math.floor(2*this.score)/2,e=Math.floor(s),r=0;r<e;++r)t.push("star-on");s%1!==0&&(t.push("star-half"),++e);for(var a=e;a<5;++a)t.push("star-off");return t}}}),C=b,_=(e("521b"),e("2877")),y=Object(_["a"])(C,v,m,!1,null,"6e2b2fc5",null),g=y.exports,j=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{class:"support-"+t.kind+" "+t.supports[t.index]})},x=[],w={name:"Support",data:function(){return{supports:["decrease","discount","special","invoice","guarantee"]}},props:{index:{type:Number},kind:{type:Number,default:1}}},k=w,S=(e("9564"),Object(_["a"])(k,j,x,!1,null,"34d18c74",null)),T=S.exports,L=e("229e"),P={name:"Detail",props:{seller:{type:Object},handleClick:{type:Function}},mounted:function(){this.detailScroll=new L["a"](this.$refs["detail-container"],{click:!0})},beforeDestroy:function(){this.detailScroll.destroy()},components:{Star:g,Support:T}},$=P,E=(e("ef02"),Object(_["a"])($,f,h,!1,null,"0c8ef96e",null)),O=E.exports,z={name:"Header",data:function(){return{show:!1}},methods:{handleClick:function(){this.show=!this.show}},props:{seller:{type:Object}},components:{Detail:O,Support:T}},D=z,F=(e("cf13"),Object(_["a"])(D,p,u,!1,null,"5b791469",null)),G=F.exports,M=0,N={name:"app",data:function(){return{seller:{}}},created:function(){var t=this;d.a.get("/api/seller").then((function(s){s.data.code===M&&(t.seller=s.data.data)}))},components:{Header:G}},Y=N,A=(e("8a89"),Object(_["a"])(Y,o,c,!1,null,"76f631a8",null)),B=A.exports,R=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods-container"},[e("div",{staticClass:"content"},[e("Menu",{ref:"menu",attrs:{goods:t.goods,toggleGood:t.toggleGood,current:t.current}}),e("GoodList",{ref:"goodList",attrs:{goods:t.goods,shopCar:t.shopCar,drop:t.drop}})],1),e("ShopCar",{ref:"shopCar",attrs:{shopCar:t.shopCar,minPrice:t.seller.minPrice,deliveryPrice:t.seller.deliveryPrice}})],1)},H=[],I=(e("ac6a"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"menu-wrapper",staticClass:"menu-wrapper"},[e("ul",{staticClass:"menu"},t._l(t.goods,(function(s,r){return e("li",{key:s.name,ref:"menuItem",refInFor:!0,class:{active:r===t.current},on:{click:function(s){return t.toggleGood(r)}}},[e("p",[-1!==s.type?e("Support",{staticStyle:{width:"12px",height:"12px"},attrs:{index:s.type}}):t._e(),t._v("\n        "+t._s(s.name)+"\n      ")],1)])})),0)])}),X=[],q={name:"Menu",props:{goods:{type:Array},toggleGood:{type:Function},current:{type:Number}},components:{Support:T}},J=q,U=(e("1b1c"),Object(_["a"])(J,I,X,!1,null,"944410cc",null)),K=U.exports,Q=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"good-container"},[e("div",{ref:"good-wrapper",staticClass:"good-wrapper"},[e("ul",t._l(t.goods,(function(s){return e("li",{key:s.name,ref:"good",refInFor:!0,staticClass:"good"},[e("p",{staticClass:"name"},[t._v(t._s(s.name))]),e("ul",{staticStyle:{padding:"0 18px"}},t._l(s.foods,(function(s){return e("li",{key:s.name,staticClass:"food border-1px border-bottom-1px",on:{click:function(e){return t.showDetail(s)}}},[e("img",{attrs:{src:s.icon,alt:"image"}}),e("div",{staticClass:"content"},[e("p",{staticClass:"name"},[t._v(t._s(s.name))]),e("div",{staticClass:"description"},[e("p",{staticStyle:{"line-height":"16px"}},[t._v(t._s(s.description))]),e("p",{staticClass:"performance"},[e("span",{staticClass:"sellCount"},[t._v("\n                    月售"+t._s(s.sellCount)+"份\n                  ")]),e("span",[t._v("\n                    好评率"+t._s(s.rating)+"%\n                  ")])]),e("p",{staticClass:"price"},[e("span",{staticClass:"new"},[t._v("￥"+t._s(s.price))]),s.oldPrice?e("span",{staticClass:"old"},[t._v("￥"+t._s(s.oldPrice))]):t._e()])]),e("div",{staticClass:"purchase-control"},[e("PurchaseControl",{attrs:{shopCar:t.shopCar,food:s,addListen:t.drop}})],1)])])})),0)])})),0)]),e("transition",{attrs:{name:"detail"}},[null!==t.food?e("Detail",{attrs:{shopCar:t.shopCar,food:t.food,hidden:t.hiddenDetail,drop:t.drop}}):t._e()],1)],1)},V=[],W=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"control"},[e("transition",{attrs:{name:"sub-btn"}},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count > 0"}],staticClass:"sub-btn icon-remove_circle_outline",on:{click:function(s){return s.stopPropagation(),t.sub(s)}}})]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count > 0"}],staticClass:"count"},[t._v(t._s(t.food.count))]),e("i",{staticClass:"add-btn icon-add_circle",on:{click:function(s){return s.stopPropagation(),t.add(s)}}})],1)},Z=[],tt=(e("20d6"),e("7f7f"),e("7514"),{name:"PurchaseControl",props:{food:{type:Object},shopCar:{type:Array},addListen:{type:Function,default:function(){}},subListen:{type:Function,default:function(){}}},methods:{add:function(t){var s=this;this.addListen(t.target),this.food.count+=1;var e=this.shopCar.find((function(t){return t.name===s.food.name}));e||this.shopCar.push(this.food)},sub:function(){var t=this;if(this.food.count>0){this.food.count-=1;var s=this.shopCar.findIndex((function(s){return s.name===t.food.name}));0===this.shopCar[s].count&&this.shopCar.splice(s,1),this.subListen(this.food)}}}}),st=tt,et=(e("1873"),Object(_["a"])(st,W,Z,!1,null,"2942cd4d",null)),rt=et.exports,at=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"detail-container",staticClass:"detail-container"},[e("div",{staticClass:"detail-wrapper"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:t.food.image,alt:"avatar"}}),e("div",{staticClass:"back",on:{click:t.hidden}},[e("i",{staticClass:"icon-arrow_lift"})])]),e("div",{staticClass:"content card border-1px border-bottom-1px"},[e("p",{staticClass:"name"},[t._v(t._s(t.food.name))]),e("p",{staticClass:"performance"},[e("span",{staticClass:"sellCount"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),e("span",[t._v("好评率"+t._s(t.food.rating)+"%")])]),e("p",{staticClass:"price"},[e("span",{staticClass:"new"},[t._v("￥"+t._s(t.food.price))]),t.food.oldPrice?e("span",{staticClass:"old"},[t._v("￥"+t._s(t.food.oldPrice))]):t._e()]),e("div",{staticClass:"control"},[e("PurchaseControl",{attrs:{shopCar:t.shopCar,food:t.food,addListen:t.drop}}),e("transition",{attrs:{name:"add-btn"}},[0===t.food.count?e("div",{staticClass:"add-btn",on:{click:function(s){return s.stopPropagation(),t.add(s)}}},[t._v("\n            加入购物车\n          ")]):t._e()])],1)]),t.food.description?e("div",{staticClass:"description card border-1px border-top-1px border-bottom-1px"},[e("p",{staticClass:"title"},[t._v("商品介绍")]),e("p",{staticClass:"content"},[t._v(t._s(t.food.description))])]):t._e(),e("div",{staticClass:"comment-container"},[e("div",{staticClass:"header border-1px border-top-1px border-bottom-1px"},[e("p",{staticClass:"title"},[t._v("商品评价")]),e("div",{staticClass:"type border-1px border-bottom-1px"},[e("span",{staticClass:"all"},[t._v("全部 "+t._s(t.food.ratings.length))]),e("span",{staticClass:"good"},[t._v("推荐 "+t._s(t.recommend))]),e("span",{staticClass:"bad"},[t._v("吐槽 "+t._s(t.roast))])]),e("div",{staticClass:"filter"},[e("span",{staticClass:"icon",class:{active:t.filter},on:{click:t.change}},[e("i",{staticClass:"icon-check_circle"})]),e("span",{staticClass:"text"},[t._v("\n            只看有内容的评价\n          ")])])]),e("ul",{staticClass:"commentList"},t._l(t.ratings,(function(s){return e("li",{key:s.rateTime,staticClass:"comment border-1px border-bottom-1px"},[e("div",{staticClass:"description"},[e("span",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(s.rateTime,"YYYY-MM-DD hh:mm:ss")))]),e("div",{staticClass:"left"},[e("span",{staticClass:"name"},[t._v(t._s(s.username))]),e("img",{attrs:{src:s.avatar,alt:"avatar"}})])]),e("div",{staticClass:"content"},[e("i",{staticClass:"icon",class:{"icon-thumb_up":0===s.rateType,"icon-thumb_down":1===s.rateType}}),t._v("\n            "+t._s(s.text)+"\n          ")])])})),0)])])])},nt=[],it={name:"Detail",props:{shopCar:{type:Array},food:{type:Object},hidden:{type:Function},drop:{type:Function}},data:function(){return{filter:!0}},methods:{add:function(t){var s=this;if(0===this.food.count){this.drop(t.target),this.food.count+=1;var e=this.shopCar.find((function(t){return t.name===s.food.name}));e||this.shopCar.push(this.food)}},change:function(){var t=this;this.filter=!this.filter,this.$nextTick((function(){t.detailScroll.refresh()}))}},computed:{recommend:function(){return this.food.ratings.reduce((function(t,s){return 0===s.rateType&&(t+=1),t}),0)},roast:function(){return this.food.ratings.reduce((function(t,s){return 1===s.rateType&&(t+=1),t}),0)},ratings:function(){return this.filter?this.food.ratings.filter((function(t){return t.text})):this.food.ratings}},mounted:function(){this.detailScroll=new L["a"](this.$refs["detail-container"],{click:!0,bounce:{top:!1}})},beforeDestroy:function(){this.detailScroll.destroy()},components:{PurchaseControl:rt}},ot=it,ct=(e("f177"),Object(_["a"])(ot,at,nt,!1,null,"afe5c0dc",null)),lt=ct.exports,dt={name:"GoodList",props:{goods:{type:Array},shopCar:{type:Array},drop:{type:Function}},data:function(){return{food:null}},methods:{showDetail:function(t){this.food=t},hiddenDetail:function(){this.food=null}},components:{PurchaseControl:rt,Detail:lt}},pt=dt,ut=(e("9cfc"),Object(_["a"])(pt,Q,V,!1,null,"2c4359ad",null)),ft=ut.exports,ht=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shopCar-container"},[e("div",{staticClass:"shopCar-wrapper"},[e("div",{staticClass:"left"},[e("span",{staticClass:"shopCar",class:{active:t.cost>0},on:{click:t.showShopList}},[e("i",{staticClass:"icon-shopping_cart"}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"bubble"},[t._v(t._s(t.total))])]),e("span",{staticClass:"cost",class:{active:t.cost>0}},[t._v("￥"+t._s(t.cost))]),e("span",{staticClass:"dividing-line"}),e("span",{staticClass:"deliveryPrice"},[t._v("另需配送费￥"+t._s(t.deliveryPrice)+"元")])]),e("span",{staticClass:"minPrice",class:{active:t.cost>=t.minPrice},on:{click:t.showPay}},[t._v(t._s(t.description))])]),e("transition",{attrs:{name:"shopList"},on:{"before-enter":t.shopListBeforeEnter,enter:t.shopListEnter,"after-enter":t.shopListAfterEnter,leave:t.shopListLeave}},[e("ShopList",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],ref:"shopList",attrs:{shopCar:t.shopCar,hidden:t.hiddenShopList}})],1),t._l(t.balls,(function(s,r){return e("transition",{key:r,attrs:{name:"ball-wrapper"},on:{"before-enter":t.ballBeforeEnter,enter:t.ballEnter,"after-enter":t.ballAfterEnter}},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.active,expression:"ball.active"}],staticClass:"ball-wrapper"},[e("div",{staticClass:"ball"})])])})),e("confirm-transition",[t.pay?e("Payment",{attrs:{hidden:t.hiddenPay,cost:t.cost}}):t._e()],1)],2)},vt=[],mt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shopList-container",on:{click:function(s){return s.target!==s.currentTarget?null:t.hidden(s)}}},[e("div",{staticClass:"shopList-wrapper"},[e("div",{staticClass:"header border-1px border-bottom-1px"},[e("span",{staticClass:"car"},[t._v("购物车")]),e("span",{staticClass:"clear",on:{click:t.show}},[t._v("清空")])]),e("div",{ref:"shopList-wrapper",staticClass:"content"},[e("ul",{staticClass:"shopList"},t._l(t.shopCar,(function(s){return e("li",{key:s.name,staticClass:"shop border-1px border-bottom-1px"},[e("span",{staticClass:"name"},[t._v(t._s(s.name))]),e("div",{staticClass:"right"},[e("span",{staticClass:"price"},[t._v("￥"+t._s(s.price*s.count))]),e("PurchaseControl",{attrs:{shopCar:t.shopCar,food:s,subListen:t.sub}})],1)])})),0)])]),e("confirm-transition",[e("Confirm",{directives:[{name:"show",rawName:"v-show",value:t.showConfirm,expression:"showConfirm"}],ref:"confirm",attrs:{certain:t.clear,cancel:t.cancel}})],1)],1)},bt=[],Ct=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"mask"},[e("div",{staticClass:"confirm"},[e("div",{staticClass:"header border-1px"},[t._v("清理购物车?")]),e("div",[e("span",{staticClass:"cancel",on:{click:t.cancel}},[t._v("取消")]),e("span",{staticClass:"certain",on:{click:t.certain}},[t._v("确定")])])])])},_t=[],yt={name:"Confirm",props:{certain:{type:Function},cancel:{type:Function}}},gt=yt,jt=(e("d494"),Object(_["a"])(gt,Ct,_t,!1,null,"5c386405",null)),xt=jt.exports,wt={name:"ShopList",props:{shopCar:{type:Array},hidden:{type:Function}},data:function(){return{showConfirm:!1}},methods:{sub:function(t){var s=this;0===this.shopCar.length?this.hidden():0===t.count&&this.$nextTick((function(){s.shopListScroll.refresh()}))},clear:function(){this.showConfirm=!1;while(this.shopCar.length){var t=this.shopCar.pop();t.count=0}this.hidden()},cancel:function(){this.showConfirm=!1},show:function(){this.showConfirm=!0}},components:{PurchaseControl:rt,Confirm:xt},mounted:function(){this.shopListScroll=new L["a"](this.$refs["shopList-wrapper"],{click:!0})},beforeDestroy:function(){this.shopListScroll.destroy()}},kt=wt,St=(e("c936"),Object(_["a"])(kt,mt,bt,!1,null,"07910efe",null)),Tt=St.exports,Lt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"payment-container"},[e("div",{staticClass:"confirm"},[e("div",{staticClass:"desc border-1px border-bottom-1px"},[e("p",{staticClass:"primary"},[t._v("支付")]),e("p",{staticClass:"secondary"},[t._v("您需要支付"+t._s(t.cost)+"元")])]),e("div",{staticClass:"certain",on:{click:t.hidden}},[t._v("确定")])])])},Pt=[],$t={name:"Payment",props:{hidden:{type:Function},cost:{type:Number}}},Et=$t,Ot=(e("e88d"),Object(_["a"])(Et,Lt,Pt,!1,null,"445253d4",null)),zt=Ot.exports,Dt={name:"ShopCar",data:function(){return{balls:[{active:!1},{active:!1},{active:!1},{active:!1},{active:!1},{active:!1},{active:!1},{active:!1}],index:0,dropBalls:[],showList:!1,pay:!1}},props:{minPrice:{type:Number},deliveryPrice:{type:Number},shopCar:{type:Array}},computed:{description:function(){return this.minPrice<=this.cost?"去结算":"还差￥".concat(this.minPrice-this.cost,"元起送")},cost:function(){return this.shopCar.reduce((function(t,s){return t+=s.price*s.count,t}),0)},total:function(){return this.shopCar.reduce((function(t,s){return t+=s.count,t}),0)}},methods:{drop:function(t){this.ball=this.balls[this.index++],this.ball.active=!0,this.ball.el=t,this.dropBalls.push(this.ball),this.index>=this.balls.length&&(this.index=0)},showShopList:function(){this.cost>0&&(this.showList=!this.showList)},hiddenShopList:function(){this.showList=!1},showPay:function(){this.cost>=this.minPrice&&(this.pay=!0)},hiddenPay:function(){this.pay=!1},ballBeforeEnter:function(t){var s=this.ball.el.getBoundingClientRect();t.style.transform="translateY(-".concat(window.innerHeight-s.top-38,"px)");var e=t.firstChild;e.style.transform="translateX(".concat(s.left-34+(s.width/2-8),"px)")},ballEnter:function(t,s){t.offsetHeight;t.style.transform="translateY(0)",t.style.transition="all .6s cubic-bezier(.49, -.29, .75, .41)";var e=t.firstChild;e.style.transform="translateX(0)",e.style.transition="all .6s linear",s()},ballAfterEnter:function(t){var s=this.dropBalls.shift();s&&(s.active=!1,s.el=null)},shopListBeforeEnter:function(t){t.style.opacity=0,t.style.transition="opacity .4s ease";var s=t.firstChild;s.style.transform="translateY(100%)",s.style.transition="transform .4s ease"},shopListEnter:function(t,s){t.offsetHeight;t.style.opacity=1;var e=t.firstChild;e.style.transform="translateY(0)",s()},shopListAfterEnter:function(t){this.$refs.shopList.shopListScroll.refresh()},shopListLeave:function(t,s){t.style.opacity=0;var e=t.firstChild;e.style.transform="translateY(100%)";var r=setTimeout((function(){clearTimeout(r),s()}),400)}},components:{ShopList:Tt,Payment:zt}},Ft=Dt,Gt=(e("7a29"),Object(_["a"])(Ft,ht,vt,!1,null,"2d3f71e2",null)),Mt=Gt.exports;function Nt(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,e=!1;return function(){var r=this,a=arguments;if(!e){e=!0;var n=setTimeout((function(){clearTimeout(n),e=!1,t.apply(r,a)}),s);this.timer=n}}}var Yt={name:"Goods",props:{seller:{type:Object}},data:function(){var t=this;return{goods:[],current:0,toggle:!1,shopCar:[],handleGoodScroll:Nt((function(s){if(!(s.y>=0||t.toggle)){s.y=-s.y;for(var e=t.$refs.goodList.$refs.good,r=e.length-1;r>=0;--r)if(s.y>=e[r].offsetTop)return void(t.current!==r&&(t.current=r,t.menuScroll.scrollToElement(t.$refs.menu.$refs.menuItem[r],200)))}}),100),handleGoodScrollEnd:function(){t.toggle&&(t.toggle=!1,t.goodScroll.on("scroll",t.handleGoodScroll))}}},methods:{initScroll:function(){var t=this.$refs,s=t.menu,e=t.goodList;this.menuScroll=new L["a"](s.$refs["menu-wrapper"],{probeType:3,click:!0}),this.goodScroll=new L["a"](e.$refs["good-wrapper"],{probeType:3,click:!0}),this.goodScroll.on("scroll",this.handleGoodScroll),this.goodScroll.on("scrollEnd",this.handleGoodScrollEnd)},toggleGood:function(t){this.toggle=!0,this.current=t,this.goodScroll.off("scroll",this.handleGoodScroll),this.menuScroll.scrollToElement(this.$refs.menu.$refs.menuItem[t],200),this.goodScroll.scrollToElement(this.$refs.goodList.$refs.good[t],200)},drop:function(t){this.$refs.shopCar.drop(t)}},components:{Menu:K,GoodList:ft,ShopCar:Mt},created:function(){var t=this;d.a.get("/api/goods").then((function(s){var e=s.data,a=e.code,n=e.data;0===a&&(t.goods=n,t.goods.forEach((function(t){t.foods.forEach((function(t){r["a"].set(t,"count",0)}))})),t.$nextTick((function(){t.goodScroll.refresh(),t.menuScroll.refresh()})))}))},mounted:function(){this.initScroll()},beforeDestroy:function(){clearTimeout(this.goodScroll.timer),this.goodScroll.destroy(),this.menuScroll.destroy()}},At=Yt,Bt=(e("a0f4"),Object(_["a"])(At,R,H,!1,null,"460ab8d0",null)),Rt=Bt.exports,Ht=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"rating-container",staticClass:"rating-container"},[e("div",{staticClass:"rating-wrapper"},[e("div",{staticClass:"overview border-1px border-bottom-1px"},[e("div",{staticClass:"left"},[e("p",{staticClass:"score"},[t._v(t._s(t.seller.score))]),e("p",{staticClass:"synthesis-score"},[t._v("综合得分")]),e("p",{staticClass:"rank"},[t._v("高于周边商家"+t._s(t.seller.rankRate)+"%")])]),e("div",{staticClass:"right"},[e("p",[e("span",[t._v("服务态度")]),e("Star",{attrs:{size:36,score:t.seller.serviceScore}}),e("span",[t._v(t._s(t.seller.serviceScore))])],1),e("p",[e("span",[t._v("商品评分")]),e("Star",{attrs:{size:36,score:t.seller.foodScore}}),e("span",[t._v(t._s(t.seller.foodScore))])],1),e("p",[e("span",[t._v("送达时间")]),e("span",{staticClass:"deliveryTime"},[t._v(t._s(t.seller.deliveryTime)+"分钟")])])])]),e("RatingFilter",{attrs:{filter:t.filter,ratings:t.ratings,toggle:t.toggle,changeType:t.changeType}}),e("ul",{staticClass:"rating-list"},t._l(t.filterRatings,(function(s){return e("li",{key:s.rateTime,staticClass:"rating border-1px border-bottom-1px"},[e("img",{staticClass:"avatar",attrs:{src:s.avatar,alt:"avatar"}}),e("div",{staticClass:"content"},[e("p",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"4px"}},[e("span",{staticClass:"name"},[t._v(t._s(s.username))]),e("span",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(s.rateTime,"YYYY-MM-DD hh:mm:ss")))])]),e("div",{staticClass:"extra"},[e("Star",{attrs:{size:24,score:s.score}}),s.deliveryTime?e("span",{staticClass:"deliveryTime"},[t._v(t._s(s.deliveryTime)+"分钟送达")]):t._e()],1),e("p",{staticClass:"content"},[t._v(t._s(s.text))]),e("div",{staticClass:"recommend"},[e("i",{staticClass:"icon",class:{"icon-thumb_up":0===s.rateType,"icon-thumb_down":0!==s.rateType}}),t._l(s.recommend,(function(s){return e("span",{key:s},[t._v(t._s(s))])}))],2)])])})),0)],1)])},It=[],Xt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"ratingFilter-container border-1px border-bottom-1px border-top-1px"},[e("div",{staticClass:"type border-1px border-bottom-1px"},[e("span",{staticClass:"all",on:{click:function(s){return t.changeType(-1)}}},[t._v("全部 "+t._s(t.ratings.length))]),e("span",{staticClass:"recommend",on:{click:function(s){return t.changeType(0)}}},[t._v("推荐 "+t._s(t.recommend))]),e("span",{staticClass:"roast",on:{click:function(s){return t.changeType(1)}}},[t._v("吐槽 "+t._s(t.roast))])]),e("div",{staticClass:"filter"},[e("span",{staticClass:"icon",class:{active:t.filter},on:{click:t.toggle}},[e("i",{staticClass:"icon-check_circle"})]),e("span",{staticClass:"text"},[t._v("\n      只看有内容的评价\n    ")])])])},qt=[],Jt={name:"RatingFilter",props:{filter:{type:Boolean},ratings:{type:Array},toggle:{type:Function},changeType:{type:Function}},computed:{recommend:function(){return this.ratings.reduce((function(t,s){return 0===s.rateType&&(t+=1),t}),0)},roast:function(){return this.ratings.reduce((function(t,s){return 1===s.rateType&&(t+=1),t}),0)}}},Ut=Jt,Kt=(e("fe58"),Object(_["a"])(Ut,Xt,qt,!1,null,"7def134c",null)),Qt=Kt.exports,Vt={name:"Ratings",props:{seller:{type:Object}},data:function(){return{filter:!0,type:-1,ratings:[]}},methods:{toggle:function(){var t=this;this.filter=!this.filter,this.$nextTick((function(){t.ratingScroll.refresh()}))},changeType:function(t){var s=this;this.type=t,this.$nextTick((function(){s.ratingScroll.refresh()}))}},computed:{filterRatings:function(){var t=this;return this.ratings.filter((function(s){var e=!0;return t.filter&&""===s.text&&(e=!1),e?(-1!==t.type&&s.rateType!==t.type&&(e=!1),e):e}))}},components:{Star:g,RatingFilter:Qt},created:function(){var t=this;d.a.get("/api/ratings").then((function(s){t.ratings=s.data.data,t.$nextTick((function(){t.ratingScroll=new L["a"](t.$refs["rating-container"],{click:!0,bounce:{top:!1}})}))}))},beforeDestroy:function(){this.ratingScroll.destroy()}},Wt=Vt,Zt=(e("1a51"),Object(_["a"])(Wt,Ht,It,!1,null,"eedd1d7c",null)),ts=Zt.exports,ss=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"seller-container",staticClass:"seller-container"},[e("div",{staticClass:"seller-wrapper"},[e("div",{staticClass:"card overview border-1px border-bottom-1px"},[e("p",{staticClass:"name"},[t._v(t._s(t.seller.name))]),e("div",{staticClass:"description border-bottom-1px border-1px"},[e("Star",{attrs:{size:36,score:t.seller.score}}),e("span",{staticClass:"ratingCount"},[t._v("("+t._s(t.seller.ratingCount)+")")]),e("span",[t._v("月售"+t._s(t.seller.sellCount)+"单")])],1),e("div",{staticClass:"extra"},[e("div",{staticClass:"minPrice"},[e("p",[t._v("起送价")]),e("p",[e("span",[t._v(t._s(t.seller.minPrice))]),t._v("元")])]),e("div",{staticClass:"deliveryPrice"},[e("p",[t._v("商家配送")]),e("p",[e("span",[t._v(t._s(t.seller.deliveryPrice))]),t._v("元")])]),e("div",{staticClass:"deliveryTime"},[e("p",[t._v("平均配送时间")]),e("p",[e("span",[t._v(t._s(t.seller.deliveryTime))]),t._v("分钟")])])]),e("div",{staticClass:"favorite"},[e("p",{staticClass:"icon",class:{active:t.favorite},on:{click:function(s){t.favorite=!t.favorite}}},[e("i",{staticClass:"icon-favorite"})]),e("p",{staticClass:"text"},[t._v(t._s(t.favorite?"已收藏":"收藏"))])])]),e("div",{staticClass:"card bulletin border-1px border-bottom-1px border-top-1px"},[e("h1",{staticClass:"title"},[t._v("公告与活动")]),e("p",{staticClass:"content"},[t._v(t._s(t.seller.bulletin))]),e("ul",{staticClass:"supports"},t._l(t.seller.supports,(function(s){return e("li",{key:s.description,staticClass:"support border-1px border-top-1px"},[e("support",{staticStyle:{width:"16px",height:"16px","margin-right":"6px"},attrs:{index:s.type,kind:3}}),t._v("\n          "+t._s(s.description)+"\n        ")],1)})),0)]),e("div",{staticClass:"card scene-container border-1px border-top-1px border-bottom-1px"},[e("h1",{staticClass:"title"},[t._v("商家实景")]),e("div",{ref:"scene-wrapper",staticClass:"scene-wrapper"},[e("ul",t._l(t.seller.pics,(function(t){return e("li",{key:t},[e("img",{attrs:{src:t,alt:"picture"}})])})),0)])]),e("div",{staticClass:"card info border-top-1px border-1px"},[e("h1",{staticClass:"title"},[t._v("商家信息")]),e("ul",t._l(t.seller.infos,(function(s){return e("li",{key:s,staticClass:"border-1px border-top-1px"},[t._v(t._s(s))])})),0)])])])},es=[],rs={name:"Seller",props:{seller:{type:Object}},data:function(){return{favorite:!1}},watch:{seller:function(t){var s=this;this.$nextTick((function(){s.sellerScroll.refresh(),s.sceneScroll.refresh()}))}},components:{Star:g,Support:T},mounted:function(){this.sellerScroll=new L["a"](this.$refs["seller-container"],{click:!0,bounce:{top:!1}}),this.sceneScroll=new L["a"](this.$refs["scene-wrapper"],{click:!1,scrollX:!0})},beforeDestroy:function(){this.sellerScroll.destroy()}},as=rs,ns=(e("968c"),Object(_["a"])(as,ss,es,!1,null,"0d0341fa",null)),is=ns.exports;e("3b2b"),e("a481");function os(t,s){var e={"(Y|y)+":t.getFullYear(),"M+":cs(t.getMonth()+1+""),"(D|d)+":cs(t.getDate()+""),"h+":cs(t.getHours()+""),"m+":cs(t.getMinutes()+""),"s+":cs(t.getSeconds()+"")};for(var r in e)s=s.replace(new RegExp(r),e[r]);return s}function cs(t){return("00"+t).substr(t.length)}e("74dd"),e("404f");r["a"].prototype.$moment=i.a,r["a"].filter("formatDate",(function(t,s){return t?os(new Date(t),s):""})),r["a"].component("confirm-transition",{functional:!0,render:function(t,s){var e={props:{name:"confirm-transition"},on:{beforeEnter:function(t){t.style.opacity=0,t.style.transition="opacity .2s ease";var s=t.firstChild;s.style.transform="scale(0, 0)",s.style.transition="transform .2s ease"},enter:function(t,s){t.offsetHeight;t.style.opacity=1;var e=t.firstChild;e.style.transform="scale(1.1, 1.1)";var r=setTimeout((function(){s(),clearTimeout(r)}),200)},afterEnter:function(t){var s=t.firstChild;s.style.transform="scale(1, 1)"},leave:function(t,s){t.style.opacity=0;var e=t.firstChild;e.style.transform="scale(0, 0)";var r=setTimeout((function(){s(),clearTimeout(r)}),200)}}};return t("transition",e,s.children)}}),r["a"].use(a["a"]),r["a"].config.productionTip=!1;var ls=[{path:"/",redirect:"/goods"},{path:"/goods",component:Rt},{path:"/ratings",component:ts},{path:"/seller",component:is}],ds=new a["a"]({mode:"history",routes:ls});new r["a"]({render:function(t){return t(B)},router:ds}).$mount("#app")},"5cbe":function(t,s,e){},"61db":function(t,s,e){},"74dd":function(t,s,e){},"7a29":function(t,s,e){"use strict";var r=e("a761"),a=e.n(r);a.a},8203:function(t,s,e){},"8a89":function(t,s,e){"use strict";var r=e("8203"),a=e.n(r);a.a},9564:function(t,s,e){"use strict";var r=e("af68"),a=e.n(r);a.a},"968c":function(t,s,e){"use strict";var r=e("d3cf"),a=e.n(r);a.a},"9cfc":function(t,s,e){"use strict";var r=e("0327"),a=e.n(r);a.a},a0f4:function(t,s,e){"use strict";var r=e("fef5"),a=e.n(r);a.a},a761:function(t,s,e){},af68:function(t,s,e){},b6b1:function(t,s,e){},bffa:function(t,s,e){},c729:function(t,s,e){},c936:function(t,s,e){"use strict";var r=e("0a37"),a=e.n(r);a.a},cf13:function(t,s,e){"use strict";var r=e("e82d"),a=e.n(r);a.a},d3cf:function(t,s,e){},d494:function(t,s,e){"use strict";var r=e("61db"),a=e.n(r);a.a},d624:function(t,s,e){},e82d:function(t,s,e){},e88d:function(t,s,e){"use strict";var r=e("eeb8"),a=e.n(r);a.a},eeb8:function(t,s,e){},ef02:function(t,s,e){"use strict";var r=e("0030"),a=e.n(r);a.a},f177:function(t,s,e){"use strict";var r=e("5cbe"),a=e.n(r);a.a},fe58:function(t,s,e){"use strict";var r=e("44a0"),a=e.n(r);a.a},fef5:function(t,s,e){}});
//# sourceMappingURL=index.b0dc00df.js.map